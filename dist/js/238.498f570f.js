"use strict";(self["webpackChunkplatform_electronic_billing"]=self["webpackChunkplatform_electronic_billing"]||[]).push([[238],{4238:function(e,t,l){l.r(t),l.d(t,{default:function(){return re}});var a=l(3396);const n={class:"flex justify-between"},o=(0,a._)("h1",{class:"font-medium lg:text-2xl text-xl text-gray-500"},"Clientes",-1),i={class:"py-5"};function d(e,t,l,d,r,m){const u=(0,a.up)("ModalCreateCustomerVue"),c=(0,a.up)("TableCustomerVue"),s=(0,a.up)("ModalEditCustomerVue");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",n,[o,(0,a.Wm)(u,{onCreateItem:d.onCreateItem},null,8,["onCreateItem"])]),(0,a._)("div",i,[(0,a.Wm)(c,{desserts:d.dataCustomer,onEditItem:d.onEditItem,onDeleteItem:d.onDeleteItem},null,8,["desserts","onEditItem","onDeleteItem"])]),(0,a.Wm)(s,{itemEdit:d.itemEdit,openModal:d.dialogEdit,onCancelItem:t[0]||(t[0]=e=>d.dialogEdit=!1),onEditItem:d.onUpdateItem},null,8,["itemEdit","openModal","onEditItem"])],64)}var r=l(3041);const m="http://143.244.144.235:8000/api";function u(e){return r.Z.get(`${m}/client/`,{headers:{Authorization:`Bearer ${e}`}})}function c(e,t){return r.Z.post(`${m}/client/`,e,{headers:{Authorization:`Bearer ${t}`}})}function s(e,t,l){return r.Z.put(`${m}/client/${e}/`,t,{headers:{Authorization:`Bearer ${l}`}})}function p(e,t){return r.Z.delete(`${m}/client/${e}/`,{headers:{Authorization:`Bearer ${t}`}})}var v=l(3512),g=l(7139),_=l(870),h=l(5039),V=l(1888),b=l(1334),f=l(3601),y=l(8521),C=l(9234),W=l(3289),k=l(338),w=l(2900),I=l(1328);const U=(0,a._)("span",{class:"px-4 w-full text-center text-teal-500 font-bold title_views"},"CREAR CLIENTE",-1),E={class:"text-xs pl-3 pb-3 text-red-400"},x={class:"grid grid-cols-2 gap-2"},H={class:"grid grid-cols-2 gap-2"},T={class:"grid grid-cols-2 gap-2"};function D(e,t,l,n,o,i){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(_.T,{size:"small",class:"text-none",color:"blue",onClick:t[0]||(t[0]=e=>n.dialog=!0)},{default:(0,a.w5)((()=>[(0,a.Wm)(W.t,{icon:"mdi-plus"}),(0,a.Uk)(" Nuevo")])),_:1}),(0,a.Wm)(f.B,{modelValue:n.dialog,"onUpdate:modelValue":t[12]||(t[12]=e=>n.dialog=e),width:"650","onClick:outside":n.closeItem},{default:(0,a.w5)((()=>[(0,a.Wm)(h._,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I.i,null,{default:(0,a.w5)((()=>[U])),_:1}),(0,a.Wm)(V.Z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y.D,{cols:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(k.rL,{variant:"outlined",label:"Tipo de documento",items:["DNI","RUC"],color:"teal",modelValue:n.document_type,"onUpdate:modelValue":t[1]||(t[1]=e=>n.document_type=e),"prepend-inner-icon":"mdi-format-list-bulleted-type"},null,8,["modelValue"]),(0,a.Wm)(w.h,{variant:"outlined",label:"N° documento","prepend-inner-icon":"mdi-barcode",color:"teal",modelValue:n.document_number,"onUpdate:modelValue":t[2]||(t[2]=e=>n.document_number=e),counter:"",maxlength:"11",onInput:t[3]||(t[3]=e=>n.customerValidate()),"hide-details":""},null,8,["modelValue"]),(0,a._)("span",E,(0,g.zw)(n.messageValidate),1),(0,a.Wm)(w.h,{variant:"outlined",label:"Nombre legal","prepend-inner-icon":"mdi-domain",color:"teal",modelValue:n.legal_name,"onUpdate:modelValue":t[4]||(t[4]=e=>n.legal_name=e)},null,8,["modelValue"]),(0,a.Wm)(w.h,{variant:"outlined",label:"Nombre comercial","prepend-inner-icon":"mdi-form-textbox",color:"teal",modelValue:n.tradename,"onUpdate:modelValue":t[5]||(t[5]=e=>n.tradename=e)},null,8,["modelValue"]),(0,a._)("div",x,[(0,a.Wm)(w.h,{variant:"outlined",label:"Pais","prepend-inner-icon":"mdi-flag",color:"teal",modelValue:n.country,"onUpdate:modelValue":t[6]||(t[6]=e=>n.country=e)},null,8,["modelValue"]),(0,a.Wm)(w.h,{variant:"outlined",label:"Departamento","prepend-inner-icon":"mdi-map",color:"teal",modelValue:n.department,"onUpdate:modelValue":t[7]||(t[7]=e=>n.department=e)},null,8,["modelValue"])]),(0,a._)("div",H,[(0,a.Wm)(w.h,{variant:"outlined",label:"Provincia","prepend-inner-icon":"mdi-map-marker-multiple",color:"teal",modelValue:n.province,"onUpdate:modelValue":t[8]||(t[8]=e=>n.province=e)},null,8,["modelValue"]),(0,a.Wm)(w.h,{variant:"outlined",label:"Distrito","prepend-inner-icon":"mdi-map-marker-path",color:"teal",modelValue:n.district,"onUpdate:modelValue":t[9]||(t[9]=e=>n.district=e)},null,8,["modelValue"])]),(0,a._)("div",T,[(0,a.Wm)(w.h,{variant:"outlined",label:"Teléfono","prepend-inner-icon":"mdi-phone",color:"teal",modelValue:n.phone,"onUpdate:modelValue":t[10]||(t[10]=e=>n.phone=e)},null,8,["modelValue"]),(0,a.Wm)(w.h,{variant:"outlined",label:"Correo","prepend-inner-icon":"mdi-email",color:"teal",modelValue:n.email,"onUpdate:modelValue":t[11]||(t[11]=e=>n.email=e)},null,8,["modelValue"])])])),_:1})])),_:1}),(0,a.Wm)(b.h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(C.C),(0,a.Wm)(_.T,{color:"blue-grey-lighten-2",variant:"tonal",onClick:n.closeItem},{default:(0,a.w5)((()=>[(0,a.Uk)(" Cancelar ")])),_:1},8,["onClick"]),(0,a.Wm)(_.T,{color:"blue-lighten-1",variant:"tonal",onClick:n.createItem},{default:(0,a.w5)((()=>[(0,a.Uk)(" Aceptar ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onClick:outside"])],64)}var A=l(1076);const N="http://143.244.144.235:8000/api";function Z(e){return A.Z.post(`${N}/sunat-api/`,e)}var $=l(4870),z={emits:["create-item"],setup(e,{emit:t}){const l=(0,$.iH)(!1),n=(0,$.iH)(""),o=(0,$.iH)(""),i=(0,$.iH)(""),d=(0,$.iH)(""),r=(0,$.iH)(""),m=(0,$.iH)(""),u=(0,$.iH)(""),c=(0,$.iH)(""),s=(0,$.iH)(""),p=(0,$.iH)(""),v=(0,$.iH)(""),g=()=>{t("create-item",{document_type:n.value,document_number:o.value,legal_name:i.value,tradename:d.value,country:r.value,department:m.value,province:u.value,district:c.value,phone:s.value,email:p.value}),_()},_=()=>{l.value=!1,n.value=o.value=d.value=s.value=p.value="",i.value=m.value=u.value=c.value=r.value=""};(0,a.YP)((()=>n.value),(()=>{h()}));const h=()=>{if(8==o.value.length||11==o.value.length)if("RUC"==n.value){const e={tipo_documento:"ruc",numero:o.value};Z(e).then((e=>{v.value="",i.value=e.data.data.nombre,m.value=e.data.data.departamento,u.value=e.data.data.provincia,c.value=e.data.data.distrito,r.value="PERÚ"})).catch((e=>{i.value=m.value=u.value=c.value=r.value="",v.value=e.response.data.data}))}else{const e={tipo_documento:"dni",numero:o.value};Z(e).then((e=>{i.value=e.data.data.nombres,v.value=""})).catch((e=>{i.value=m.value=u.value=c.value=r.value="",v.value=e.response.data.data}))}};return{dialog:l,document_type:n,document_number:o,messageValidate:v,legal_name:i,tradename:d,country:r,department:m,province:u,district:c,phone:s,email:p,customerValidate:h,createItem:g,closeItem:_}}},L=l(89);const M=(0,L.Z)(z,[["render",D]]);var P=M;const B=(0,a._)("span",{class:"px-4 w-full text-center text-teal-500 font-bold title_views"},"EDITAR CLIENTE",-1),R={class:"text-xs pl-3 pb-3 text-red-400"},j={class:"grid grid-cols-2 gap-2"},Y={class:"grid grid-cols-2 gap-2"},S={class:"grid grid-cols-2 gap-2"};function O(e,t,l,n,o,i){return(0,a.wg)(),(0,a.j4)(f.B,{modelValue:n.dialog,"onUpdate:modelValue":t[11]||(t[11]=e=>n.dialog=e),width:"650","onClick:outside":n.closeItem},{default:(0,a.w5)((()=>[(0,a.Wm)(h._,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I.i,null,{default:(0,a.w5)((()=>[B])),_:1}),(0,a.Wm)(V.Z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y.D,{cols:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(k.rL,{variant:"outlined",label:"Tipo de documento",items:["DNI","RUC"],color:"teal",modelValue:n.document_type,"onUpdate:modelValue":t[0]||(t[0]=e=>n.document_type=e),"prepend-inner-icon":"mdi-format-list-bulleted-type",disabled:""},null,8,["modelValue"]),(0,a.Wm)(w.h,{variant:"outlined",label:"N° documento","prepend-inner-icon":"mdi-barcode",color:"teal",modelValue:n.document_number,"onUpdate:modelValue":t[1]||(t[1]=e=>n.document_number=e),counter:"",maxlength:"11",onInput:t[2]||(t[2]=t=>e.customerValidate()),disabled:"","hide-details":""},null,8,["modelValue"]),(0,a._)("span",R,(0,g.zw)(e.messageValidate),1),(0,a.Wm)(w.h,{variant:"outlined",label:"Nombre legal","prepend-inner-icon":"mdi-domain",color:"teal",modelValue:n.legal_name,"onUpdate:modelValue":t[3]||(t[3]=e=>n.legal_name=e)},null,8,["modelValue"]),(0,a.Wm)(w.h,{variant:"outlined",label:"Nombre comercial","prepend-inner-icon":"mdi-form-textbox",color:"teal",modelValue:n.tradename,"onUpdate:modelValue":t[4]||(t[4]=e=>n.tradename=e)},null,8,["modelValue"]),(0,a._)("div",j,[(0,a.Wm)(w.h,{variant:"outlined",label:"Pais","prepend-inner-icon":"mdi-flag",color:"teal",modelValue:n.country,"onUpdate:modelValue":t[5]||(t[5]=e=>n.country=e)},null,8,["modelValue"]),(0,a.Wm)(w.h,{variant:"outlined",label:"Departamento","prepend-inner-icon":"mdi-map",color:"teal",modelValue:n.department,"onUpdate:modelValue":t[6]||(t[6]=e=>n.department=e)},null,8,["modelValue"])]),(0,a._)("div",Y,[(0,a.Wm)(w.h,{variant:"outlined",label:"Provincia","prepend-inner-icon":"mdi-map-marker-multiple",color:"teal",modelValue:n.province,"onUpdate:modelValue":t[7]||(t[7]=e=>n.province=e)},null,8,["modelValue"]),(0,a.Wm)(w.h,{variant:"outlined",label:"Distrito","prepend-inner-icon":"mdi-map-marker-path",color:"teal",modelValue:n.district,"onUpdate:modelValue":t[8]||(t[8]=e=>n.district=e)},null,8,["modelValue"])]),(0,a._)("div",S,[(0,a.Wm)(w.h,{variant:"outlined",label:"Teléfono","prepend-inner-icon":"mdi-phone",color:"teal",modelValue:n.phone,"onUpdate:modelValue":t[9]||(t[9]=e=>n.phone=e)},null,8,["modelValue"]),(0,a.Wm)(w.h,{variant:"outlined",label:"Correo","prepend-inner-icon":"mdi-email",color:"teal",modelValue:n.email,"onUpdate:modelValue":t[10]||(t[10]=e=>n.email=e)},null,8,["modelValue"])])])),_:1})])),_:1}),(0,a.Wm)(b.h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(C.C),(0,a.Wm)(_.T,{color:"blue-grey-lighten-2",variant:"tonal",onClick:n.closeItem},{default:(0,a.w5)((()=>[(0,a.Uk)(" Cancelar ")])),_:1},8,["onClick"]),(0,a.Wm)(_.T,{color:"blue-lighten-1",variant:"tonal",onClick:n.editItem},{default:(0,a.w5)((()=>[(0,a.Uk)(" Aceptar ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onClick:outside"])}var q={props:{itemEdit:Object,openModal:Boolean},emits:["edit-item","cancel-item"],setup(e,{emit:t}){const l=(0,$.iH)(!1),n=(0,$.iH)(""),o=(0,$.iH)(""),i=(0,$.iH)(""),d=(0,$.iH)(""),r=(0,$.iH)(""),m=(0,$.iH)(""),u=(0,$.iH)(""),c=(0,$.iH)(""),s=(0,$.iH)(""),p=(0,$.iH)("");(0,a.YP)((()=>e.openModal),(async e=>{l.value=e})),(0,a.YP)((()=>e.itemEdit),(e=>{console.log(e),0!==Object.keys(e).length&&(n.value=e.item.document_type,o.value=e.item.document_number,i.value=e.item.legal_name,d.value=e.item.tradename,r.value=e.item.country,m.value=e.item.department,u.value=e.item.province,c.value=e.item.district,s.value=e.item.phone,p.value=e.item.email)}));const v=()=>{t("edit-item",{document_type:n.value,document_number:o.value,legal_name:i.value,tradename:d.value,country:r.value,department:m.value,province:u.value,district:c.value,phone:s.value,email:p.value}),g()},g=()=>{t("cancel-item")};return{dialog:l,document_type:n,document_number:o,legal_name:i,tradename:d,country:r,department:m,province:u,district:c,phone:s,email:p,editItem:v,closeItem:g}}};const F=(0,L.Z)(q,[["render",O]]);var G=F,J=l(678);const K={class:"flex gap-1 justify-center"},Q=["onClick"],X=["onClick"];function ee(e,t,l,n,o,i){const d=(0,a.up)("v-data-table");return(0,a.wg)(),(0,a.j4)(d,{headers:o.headers,items:l.desserts,class:"elevation-1 text-sm"},{["item.createdAt"]:(0,a.w5)((({item:e})=>[(0,a.Uk)((0,g.zw)(n.formatCreatedAt(e.createdAt)),1)])),["item.actions"]:(0,a.w5)((({item:e})=>[(0,a._)("div",K,[(0,a._)("span",{onClick:t=>n.editItem(e)},[(0,a.Wm)(_.T,{icon:"mdi-pencil",size:"small",variant:"text",color:"green"}),(0,a.Wm)(J.N,{activator:"parent",location:"top"},{default:(0,a.w5)((()=>[(0,a.Uk)("Editar")])),_:1})],8,Q),(0,a._)("span",{onClick:t=>n.deleteItem(e)},[(0,a.Wm)(_.T,{icon:"mdi-delete-empty",size:"small",variant:"text",color:"red"}),(0,a.Wm)(J.N,{activator:"parent",location:"top"},{default:(0,a.w5)((()=>[(0,a.Uk)("Eliminar")])),_:1})],8,X)])])),_:2},1032,["headers","items"])}var te=l(6421),le={props:{desserts:Array},components:{VDataTable:te.y_},emits:["delete-item","edit-item"],data(){return{headers:[{title:"N° de documento",align:"start",key:"document_number"},{title:"Tipo de documento",align:"start",key:"document_type"},{title:"Nombre legal",key:"legal_name"},{title:"Telefono",align:"start",key:"phone"},{title:"Correo",align:"center",key:"email"},{title:"Acciones",align:"center",key:"actions"}]}},setup(e,{emit:t}){const l=e=>{t("edit-item",{item:e})},a=e=>{t("delete-item",{item:e})},n=e=>{const t={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},l=new Date(e).toLocaleDateString("es-PE",t);return l};return{formatCreatedAt:n,editItem:l,deleteItem:a}}};const ae=(0,L.Z)(le,[["render",ee]]);var ne=ae,oe=l(4239),ie={components:{TableCustomerVue:ne,ModalCreateCustomerVue:P,ModalEditCustomerVue:G},setup(){const e=(0,$.iH)([]),t=(0,$.iH)({}),l=(0,$.iH)(!1);(0,a.bv)((()=>{n()}));const n=async()=>{const t=await u(oe.Z.state.token);e.value=t.data},o=async e=>{""!=e.document_type&&""!=e.document_number?await c(e,oe.Z.state.token).then((()=>{(0,v.y)((()=>{n()}),"success","Logrado","Se ha creado correctamente")})).catch((e=>{(0,v.y)((()=>{}),"error","Error",e.message)})):(0,v.y)((()=>{}),"warning","Error","Los campos no deben estar vacios")},i=e=>{l.value=!0,t.value=e},d=async e=>{l.value=!1,""!=e.document_type&&""!=e.document_number?await s(t.value.item.id,e,oe.Z.state.token).then((e=>{(0,v.y)((()=>{n()}),"success","Logrado","Se ha editado correctamente")})).catch((e=>{(0,v.y)((()=>{}),"error","Error",e.message)})):(0,v.y)((()=>{}),"warning","Error","Los campos no deben estar vacios")},r=e=>{(0,v.M)((async()=>{await p(e.item.id,oe.Z.state.token).then((()=>{(0,v.y)((()=>{n()}),"success","Logrado","Se ha eliminado correctamente")})).catch((e=>{(0,v.y)((()=>{}),"error","Error",e.message)}))}),"¿Estás seguro de eliminar este cliente?","Aceptar")};return{dialogEdit:l,dataCustomer:e,itemEdit:t,onDeleteItem:r,onUpdateItem:d,onEditItem:i,onCreateItem:o}}};const de=(0,L.Z)(ie,[["render",d]]);var re=de}}]);
//# sourceMappingURL=238.498f570f.js.map