"use strict";(self["webpackChunkplatform_electronic_billing"]=self["webpackChunkplatform_electronic_billing"]||[]).push([[565],{1239:function(e,t,a){a.d(t,{Hr:function(){return l},Ih:function(){return c},LW:function(){return o},Qg:function(){return i},ff:function(){return s}});var n=a(3041);const r="http://143.244.144.235:8000/api";function o(e){return n.Z.get(`${r}/list_voucher/`,{headers:{Authorization:`Bearer ${e}`}})}function i(e,t){return n.Z.post(`${r}/voucher/`,e,{headers:{Authorization:`Bearer ${t}`}})}function s(e,t){return n.Z.post(`${r}/list_voucher/`,e,{headers:{Authorization:`Bearer ${t}`}})}function l(e,t,a){return n.Z.put(`${r}/voucher/${e}/`,t,{headers:{Authorization:`Bearer ${a}`}})}function c(e,t){return n.Z.delete(`${r}/voucher/${e}/`,{headers:{Authorization:`Bearer ${t}`}})}},8492:function(e,t,a){a.r(t),a.d(t,{default:function(){return z}});var n=a(3396),r=a(870),o=a(3289);const i={class:"flex justify-between"},s=(0,n._)("h1",{class:"font-bold lg:text-2xl text-xl text-gray-400"},"Comprobantes",-1),l={class:"py-5"};function c(e,t,a,c,m,d){const u=(0,n.up)("router-link"),p=(0,n.up)("TableVoucher");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",i,[s,(0,n.Wm)(u,{to:"createvouchers"},{default:(0,n.w5)((()=>[(0,n.Wm)(r.T,{class:"text-none",size:"small",color:"indigo-lighten-2"},{default:(0,n.w5)((()=>[(0,n.Wm)(o.t,{icon:"mdi-plus"}),(0,n.Uk)(" Nuevo ")])),_:1})])),_:1})]),(0,n._)("div",l,[(0,n.Wm)(p,{desserts:c.dataTable,onApproveItem:c.onApproveItem,onEditItem:c.onEditItem,onPdfItem:c.onPdfItem,onDeleteItem:c.onDeleteItem,onApprovalRequest:c.onApprovalRequest},null,8,["desserts","onApproveItem","onEditItem","onPdfItem","onDeleteItem","onApprovalRequest"])])],64)}a(560);var m=a(4870),d=a(7139),u=a(7103),p=a(678);const h={class:"flex gap-1"},f=["onClick"],v=["onClick"];function g(e,t,a,o,i,s){const l=(0,n.up)("v-data-table");return(0,n.wg)(),(0,n.j4)(l,{headers:i.headers,items:a.desserts,class:"elevation-1 text-sm"},{["item.date_created"]:(0,n.w5)((({item:e})=>[(0,n.Uk)((0,d.zw)(o.formatCreatedAt(e.date_created)),1)])),["item.state_sunat"]:(0,n.w5)((({item:e})=>[(0,n.Wm)(u.v,{color:"indigo"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,d.zw)(e.state_sunat),1)])),_:2},1024)])),["item.actions"]:(0,n.w5)((({item:e})=>[(0,n._)("div",h,[(0,n._)("span",{onClick:t=>o.editItem(e)},[(0,n.Wm)(r.T,{icon:"mdi-pencil",size:"small",variant:"text",color:"green"}),(0,n.Wm)(p.N,{activator:"parent",location:"top"},{default:(0,n.w5)((()=>[(0,n.Uk)("Editar")])),_:1})],8,f),(0,n._)("span",{onClick:t=>o.deleteItem(e)},[(0,n.Wm)(r.T,{icon:"mdi-delete-empty",size:"small",variant:"text",color:"red"}),(0,n.Wm)(p.N,{activator:"parent",location:"top"},{default:(0,n.w5)((()=>[(0,n.Uk)("Eliminar")])),_:1})],8,v)])])),_:2},1032,["headers","items"])}var _=a(7360),k={props:{desserts:Array},components:{VDataTable:_.y_},emits:["delete-item","edit-item"],data(){return{headers:[{title:"#",align:"start",key:"id"},{title:"Cliente",align:"start",key:"client.legal_name"},{title:"Establecimiento",align:"start",key:"establishment.name"},{title:"Almacén",align:"start",key:"store.name"},{title:"Moneda",align:"start",key:"currency"},{title:"Total",key:"total"},{title:"Fecha de emisión",align:"center",key:"date_created"},{title:"Estado en la SUNAT",key:"state_sunat"},{title:"Acciones",key:"actions"}]}},setup(e,{emit:t}){const a=e=>{t("edit-item",{item:e})},n=e=>{t("delete-item",{item:e})},r=e=>{const t={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},a=new Date(e).toLocaleDateString("es-PE",t);return a};return{formatCreatedAt:r,editItem:a,deleteItem:n}}},y=a(89);const b=(0,y.Z)(k,[["render",g]]);var I=b,A=a(1239),w=a(3512),E=a(2483),T=a(4239),$={props:{reloadTable:Boolean},components:{TableVoucher:I},emits:["create-cotizacion","edit-item","pdf-item","approve-item","approval-request"],setup(e,{emit:t}){const a=(0,m.iH)([]),r=(0,E.tv)();(0,n.bv)((async()=>{await o()})),(0,n.YP)((()=>e.reloadTable),(e=>{e&&o()}));const o=async()=>{(0,A.LW)(T.Z.state.token).then((e=>{a.value=e.data.data})).catch((e=>{console.log(e)}))},i=e=>{const t=e.item.id;r.push({name:"updatevouchers",params:{id:t}})},s=e=>{t("approve-item",{item:e})},l=e=>{t("approval-request",{item:e})},c=e=>{t("pdf-item",{item:e})},d=e=>{(0,w.M)((async()=>{(0,A.Ih)(e.item.id,T.Z.state.token).then((()=>{(0,w.y)((()=>{o()}),"success","Logrado","El comprobante se ha eliminado correctamente")})).catch((()=>{(0,w.y)((()=>{o()}),"error","Error","Hubo un error al eliminar el comprobante")}))}),"¿Estás seguro de eliminar este comprobante?","Aceptar")};return{dataTable:a,onApprovalRequest:l,onPdfItem:c,onApproveItem:s,onDeleteItem:d,onEditItem:i}}};const x=(0,y.Z)($,[["render",c]]);var z=x}}]);
//# sourceMappingURL=565.9c1fb57a.js.map