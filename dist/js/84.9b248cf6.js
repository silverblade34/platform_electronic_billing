"use strict";(self["webpackChunkplatform_electronic_billing"]=self["webpackChunkplatform_electronic_billing"]||[]).push([[84],{9084:function(e,t,a){a.r(t),a.d(t,{default:function(){return J}});var n=a(3396);const l={class:"flex justify-between"},i=(0,n._)("h1",{class:"font-medium lg:text-2xl text-xl title_views text-gray-500"},"Almacén",-1),o={class:"py-5"};function r(e,t,a,r,d,c){const m=(0,n.up)("ModalCreateStore"),u=(0,n.up)("TableStore"),s=(0,n.up)("ModalEditStore");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",l,[i,(0,n.Wm)(m,{onCreateItem:r.onCreateItem},null,8,["onCreateItem"])]),(0,n._)("div",o,[(0,n.Wm)(u,{desserts:r.dataStore,onEditItem:r.onEditItem,onDeleteItem:r.onDeleteItem},null,8,["desserts","onEditItem","onDeleteItem"])]),(0,n.Wm)(s,{itemEdit:r.storeEdit,openModal:r.dialogEdit,onCancelItem:t[0]||(t[0]=e=>r.dialogEdit=!1),onEditItem:r.editItem},null,8,["itemEdit","openModal","onEditItem"])],64)}var d=a(7139),c=a(870),m=a(678);const u={class:"flex gap-1"},s=["onClick"],p=["onClick"];function v(e,t,a,l,i,o){const r=(0,n.up)("v-data-table");return(0,n.wg)(),(0,n.j4)(r,{headers:i.headers,items:a.desserts,class:"elevation-1 text-sm"},{["item.date_created"]:(0,n.w5)((({item:e})=>[(0,n.Uk)((0,d.zw)(l.formatCreatedAt(e.date_created)),1)])),["item.actions"]:(0,n.w5)((({item:e})=>[(0,n._)("div",u,[(0,n._)("span",{onClick:t=>l.editItem(e)},[(0,n.Wm)(c.T,{icon:"mdi-pencil",size:"small",variant:"text",color:"green"}),(0,n.Wm)(m.N,{activator:"parent",location:"top"},{default:(0,n.w5)((()=>[(0,n.Uk)("Editar")])),_:1})],8,s),(0,n._)("span",{onClick:t=>l.deleteItem(e)},[(0,n.Wm)(c.T,{icon:"mdi-delete-empty",size:"small",variant:"text",color:"red"}),(0,n.Wm)(m.N,{activator:"parent",location:"top"},{default:(0,n.w5)((()=>[(0,n.Uk)("Eliminar")])),_:1})],8,p)])])),_:2},1032,["headers","items"])}var g=a(6421),f={props:{desserts:Array},components:{VDataTable:g.y_},emits:["delete-item","edit-item"],data(){return{headers:[{title:"Código",align:"start",key:"id"},{title:"Nombre",align:"start",key:"name"},{title:"Dirección",key:"direction"},{title:"Fecha de creación",align:"center",key:"date_created"},{title:"Acciones",key:"actions"}]}},setup(e,{emit:t}){const a=e=>{t("edit-item",{item:e})},n=e=>{t("delete-item",{item:e})},l=e=>{const t={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},a=new Date(e).toLocaleDateString("es-PE",t);return a};return{formatCreatedAt:l,editItem:a,deleteItem:n}}},w=a(89);const h=(0,w.Z)(f,[["render",v]]);var _=h,b=a(3041);const k="http://143.244.144.235:8000/api";function C(e){return b.Z.get(`${k}/store/`,{headers:{Authorization:`Bearer ${e}`}})}function W(e,t){return b.Z.post(`${k}/store/`,e,{headers:{Authorization:`Bearer ${t}`}})}function I(e,t,a){return b.Z.put(`${k}/store/${e}/`,t,{headers:{Authorization:`Bearer ${a}`}})}function y(e,t){return b.Z.delete(`${k}/store/${e}/`,{headers:{Authorization:`Bearer ${t}`}})}var E=a(5039),V=a(1888),A=a(1334),x=a(3601),D=a(8521),U=a(9234),Z=a(3289),S=a(2900),H=a(1328);const M=(0,n._)("span",{class:"px-4 w-full text-center text-blue-400 font-bold title_views"},"CREAR ALMACÉN",-1);function T(e,t,a,l,i,o){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(c.T,{size:"small",class:"text-none",color:"blue",onClick:t[0]||(t[0]=e=>l.dialog=!0)},{default:(0,n.w5)((()=>[(0,n.Wm)(Z.t,{icon:"mdi-plus"}),(0,n.Uk)(" Nuevo")])),_:1}),(0,n.Wm)(x.B,{modelValue:l.dialog,"onUpdate:modelValue":t[4]||(t[4]=e=>l.dialog=e),width:"500"},{default:(0,n.w5)((()=>[(0,n.Wm)(E._,null,{default:(0,n.w5)((()=>[(0,n.Wm)(H.i,null,{default:(0,n.w5)((()=>[M])),_:1}),(0,n.Wm)(V.Z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(D.D,{cols:"12"},{default:(0,n.w5)((()=>[(0,n.Wm)(S.h,{variant:"outlined",label:"Nombre","prepend-inner-icon":"mdi-badge-account",color:"blue",modelValue:l.name,"onUpdate:modelValue":t[1]||(t[1]=e=>l.name=e)},null,8,["modelValue"]),(0,n.Wm)(S.h,{variant:"outlined",label:"Dirección","prepend-inner-icon":"mdi-sign-direction",color:"blue",modelValue:l.direction,"onUpdate:modelValue":t[2]||(t[2]=e=>l.direction=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(A.h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(U.C),(0,n.Wm)(c.T,{color:"blue-grey-lighten-2",variant:"tonal",onClick:t[3]||(t[3]=e=>l.dialog=!1)},{default:(0,n.w5)((()=>[(0,n.Uk)(" Cancelar ")])),_:1}),(0,n.Wm)(c.T,{color:"blue-lighten-1",variant:"tonal",onClick:l.createItem},{default:(0,n.w5)((()=>[(0,n.Uk)(" Aceptar ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var $=a(4870),z={emits:["create-item"],setup(e,{emit:t}){const a=(0,$.iH)(!1),n=(0,$.iH)(""),l=(0,$.iH)(""),i=()=>{t("create-item",{name:n.value,direction:l.value}),n.value=l.value="",a.value=!1};return{dialog:a,name:n,direction:l,createItem:i}}};const L=(0,w.Z)(z,[["render",T]]);var N=L,B=a(3512);const j=(0,n._)("span",{class:"px-4 w-full text-center text-blue-400 font-bold title_views"},"EDITAR ALMACÉN",-1);function Y(e,t,a,l,i,o){return(0,n.wg)(),(0,n.j4)(x.B,{modelValue:l.dialog,"onUpdate:modelValue":t[2]||(t[2]=e=>l.dialog=e),width:"500","onClick:outside":l.cancelItem},{default:(0,n.w5)((()=>[(0,n.Wm)(E._,null,{default:(0,n.w5)((()=>[(0,n.Wm)(H.i,null,{default:(0,n.w5)((()=>[j])),_:1}),(0,n.Wm)(V.Z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(D.D,{cols:"12"},{default:(0,n.w5)((()=>[(0,n.Wm)(S.h,{variant:"outlined",label:"Nombre","prepend-inner-icon":"mdi-badge-account",color:"blue",modelValue:l.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.name=e)},null,8,["modelValue"]),(0,n.Wm)(S.h,{variant:"outlined",label:"Dirección","prepend-inner-icon":"mdi-sign-direction",color:"blue",modelValue:l.direction,"onUpdate:modelValue":t[1]||(t[1]=e=>l.direction=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(A.h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(U.C),(0,n.Wm)(c.T,{color:"blue-grey-lighten-2",variant:"tonal",onClick:l.cancelItem},{default:(0,n.w5)((()=>[(0,n.Uk)(" Cancelar ")])),_:1},8,["onClick"]),(0,n.Wm)(c.T,{color:"blue-lighten-1",variant:"tonal",onClick:l.editItem},{default:(0,n.w5)((()=>[(0,n.Uk)(" Aceptar ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onClick:outside"])}var P={props:{itemEdit:Object,openModal:Boolean},emits:["edit-item","cancel-item"],setup(e,{emit:t}){const a=(0,$.iH)(!1),l=(0,$.iH)(""),i=(0,$.iH)("");(0,n.YP)((()=>e.openModal),(e=>{a.value=e})),(0,n.YP)((()=>e.itemEdit),(e=>{0!==Object.keys(e).length&&(l.value=e.item.name,i.value=e.item.direction)}));const o=()=>{t("edit-item",{name:l.value,direction:i.value}),l.value=i.value=""},r=()=>{t("cancel-item")};return{dialog:a,name:l,direction:i,editItem:o,cancelItem:r}}};const R=(0,w.Z)(P,[["render",Y]]);var O=R,F=a(4239),q={components:{TableStore:_,ModalCreateStore:N,ModalEditStore:O},setup(){const e=(0,$.iH)([]),t=(0,$.iH)({}),a=(0,$.iH)(!1);(0,n.bv)((()=>{l()}));const l=async()=>{await C(F.Z.state.token).then((t=>{e.value=t.data}))},i=async e=>{""!=e.name&&""!=e.direction?await W(e,F.Z.state.token).then((()=>{(0,B.y)((()=>{l()}),"success","Logrado","Se ha creado correctamente")})).catch((e=>{(0,B.y)((()=>{}),"error","Error",e.message)})):(0,B.y)((()=>{}),"warning","Error","Los campos no deben estar vacios")},o=e=>{a.value=!0,t.value=e},r=async e=>{a.value=!1,""!=e.name&&""!=e.direction?await I(t.value.item.id,e,F.Z.state.token).then((()=>{(0,B.y)((()=>{l()}),"success","Logrado","Se ha editado correctamente")})):(0,B.y)((()=>{}),"warning","Error","Los campos no deben estar vacios")},d=e=>{(0,B.M)((async()=>{await y(e.item.id,F.Z.state.token).then((()=>{(0,B.y)((()=>{l()}),"success","Logrado","Se ha eliminado correctamente")}))}),"¿Estás seguro de eliminar este almacén?","Aceptar")};return{dataStore:e,dialogEdit:a,storeEdit:t,onCreateItem:i,onDeleteItem:d,onEditItem:o,editItem:r}}};const G=(0,w.Z)(q,[["render",r]]);var J=G}}]);
//# sourceMappingURL=84.9b248cf6.js.map